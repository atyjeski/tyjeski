*,
*::before,
*::after {
    box-sizing: border-box;
}

/*  
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Custom Properties 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
*/


:root {
    --ff-primary: 'Source Sans Pro', sans-serif;
    --ff-secondary: 'Times New Roman', Times, serif;

    --fw-reg: 300;
    --fw-bold: 900;
    --clr-light: #fff;
    --clr-dark: #0d0d0d;
    --clr-bg: #272064;
    --clr-highlight: rgb(255, 255, 0);
    --clr-lives: rgb(202, 32, 32);
    --clr-hints: rgb(31, 205, 248);

    --fs-small: 1.5vh;
    --fs-medium: 2vh;
    --fs-large: 3vh;

    --margin: 0.6vh;

    --bw: .25vh;
    --br: 1vh;

    --card-size: min(5vw, 2.7vh);
    --card-width: calc(2 * var(--card-size));
    --card-height: calc(3 * var(--card-size));

    --icon-bw: .5vh;
    --icon-size: 6.5vh;
}

@media (min-aspect-ratio: 4/3) {
    :root {
        --card-size: 4vh;
        --card-width: calc(2 * var(--card-size));
        --card-height: calc(3 * var(--card-size));
    }
}

/*  
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    General Styles
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
*/


html,
body {
    margin: 0;
    padding: 0;
}

body {
    min-height: 100vh;
    background: var(--clr-bg);
    color: var(--clr-light);
    font-family: var(--ff-primary);
    font-size: var(--fs-small);
    display: flex;
    flex-direction: column;

    /* mobile viewport bug fix */
    min-height: -webkit-fill-available;
}

html {
    height: -webkit-fill-available;
}
  
.played-cards,
.discarded-cards,
.game-info,
.player-text {
    background: var(--clr-dark);
    border: var(--bw) solid var(--clr-light);
    border-radius: var(--br);
}


/*  
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Header - Played and Discarded
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
*/


.header { display: flex; }

.played-cards,
.discarded-cards {
    margin: var(--margin);
    padding: var(--margin);
    display: flex;
    flex-direction: column;
}

.discarded-cards { 
    flex: 1;
    margin-left: 0;
}

.played-cards__display,
.discarded-cards__display {
    display: flex;
    flex: 1;
    margin: var(--margin);
}

.played-cards__display { justify-content: center; }

.played-cards__display--stack {
    display: flex;
    flex-direction: column;
}

.played-cards__display--stack > .card {
    margin-bottom: calc( var(--card-height) * -.96);
}

.discarded-cards__display--stack {
    display: flex;
    flex-direction: row;
}

.discarded-cards__display--stack > .card {
    margin-right: calc( var(--card-width) * -.7);;
}


/*  
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Content - Player Hands and Text 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
*/


.content {
    flex: 1;
    display: grid;
    grid-template-rows: 20%;
    margin: var(--margin);
    margin-top: 0;
    align-items: center;
}

@media (min-aspect-ratio: 4/3) {
    .content {
        grid-template-rows: repeat(3, 33.33%);
        grid-auto-flow: column;
    }
}

.player-container {
    display: flex;
    align-items: center;
    margin: var(--margin);
}

.player-name {
    font-family: var(--ff-secondary);
    margin-left: var(--margin);
}

.player-hand {
    display: flex;
    flex-shrink: 0;
}

.player-hand > .card {
    margin-right: var(--margin);
}

.player-text {
    --triangle-width: 2vh;
    --text-bubble-width: 13vh;

    font-size: var(--fs-medium);
    padding: var(--margin);
    align-self: stretch;
    min-width: var(--text-bubble-width);
    position: relative;
    margin-left: calc(var(--triangle-width) + var(--margin));
    margin-right: var(--margin);
}

.player-text:before,
.player-text:after {
    content: '';
    width: 0;
    height: 0;
    position: absolute;
    border-top: calc(var(--triangle-width) * .5) solid transparent;
    border-bottom: calc(var(--triangle-width) * .5) solid transparent;
    bottom: var(--br);
}

.player-text:before {
    border-right: var(--triangle-width) solid var(--clr-light);
    left: calc(var(--triangle-width) * -1 - var(--bw) * .5);
}

.player-text:after {
    border-right: var(--triangle-width) solid var(--clr-dark);
    left: calc(var(--triangle-width) * -1 + var(--bw) * 1.5);
}


/*  
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Footer - Game Info Section 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
*/


.game-info {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 10vh;
    padding-top: var(--margin);
}

.icon-wrapper {
    position: relative;
    margin-left: 3vh;
    margin-right: 3vh;
    flex-shrink: 0;
    text-align: center;
}

.icon {
    height: var(--icon-size);
    width: var(--icon-size);
    display: flex;
    justify-content: center;
    align-items: center;
}

.icon-counter {
    z-index: 1;
    font-size: var(--fs-large);
    position: absolute;
    width: 100%;
    text-align: center;
    margin-top: calc(var(--icon-bw) * 1.75);
}

/*  
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Shapes for Icons 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
*/


    /* deck */

.deck-shape {
    width: 75%;
    height: 100%;
    background-color: var(--clr-dark);
    border: var(--icon-bw) solid var(--clr-light);
    border-radius: var(--br);
    margin-bottom: var(--margin);
}

    /* hints */

.hint-shape {
    --triangle-height: calc(var(--icon-size) * .25);

    position: relative;
    width: 100%;
    height: 70%;
    background-color: var(--clr-dark);
    border: var(--icon-bw) solid var(--clr-light);
    border-radius: var(--br);
    margin-bottom: var(--triangle-height);
    margin-top: 10%;
}

.hint-shape:before,
.hint-shape:after {
    content: '';
    width: 0;
    height: 0;
    position: absolute;
    border-top: calc(var(--triangle-height) * .5) solid transparent;
    border-right: calc(var(--triangle-height)) solid transparent;
    left: var(--br);
}

.hint-shape:before {
    border-top: var(--triangle-height) solid var(--clr-light);
    bottom: calc(var(--triangle-height) * -1 - var(--icon-bw) * .5);
}

.hint-shape:after {
    border-top: var(--triangle-height) solid var(--clr-dark);
    bottom: calc(var(--triangle-height) * -1 + var(--icon-bw) * 1.5);
    left: calc(var(--br) + var(--icon-bw));
}

    /* heart */

.heart-shape {
    position: relative;
    width: 60%;
    height: 60%;
    background-color: var(--clr-hints);
}

.heart-shape:before,
.heart-shape:after {
    content: '';
    position: absolute;
    left: 0;
    bottom: 0;
    z-index: 1;
}

.heart-shape:before {
    width: 100%; 
    height: 150%; 
    border-top-left-radius: 75% 50%;
    border-top-right-radius: 75% 50%;
}

.heart-shape:after {
    width: 150%; 
    height: 100%; 
    border-top-right-radius: 50% 75%;
    border-bottom-right-radius: 50% 75%;
}

.heart-shape__exterior,
.heart-shape__exterior:before,
.heart-shape__exterior:after {
    background-color: var(--clr-light);
}

.heart-shape__exterior {
    transform: rotate(-45deg);
    padding: var(--icon-bw);
}

.heart-shape__interior,
.heart-shape__interior:before,
.heart-shape__interior:after {
    background-color: var(--clr-dark);
    z-index: 2;
}

.heart-shape__interior {
    height: 100%;
    width: 100%;
}

.heart-shape__interior:before {
    height: calc(150% + var(--icon-bw));
}

.heart-shape__interior:after {
    width: calc(150% + var(--icon-bw));
}


/*  
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Cards
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
*/


.card {
    background-size: 100%;
    height: var(--card-height);
    width: var(--card-width);
    background-repeat: no-repeat;
    z-index: 100;
}

.r1 { background-image: url(/static/hanabi/img/r1.png); }
.r2 { background-image: url(/static/hanabi/img/r2.png); }
.r3 { background-image: url(/static/hanabi/img/r3.png); }
.r4 { background-image: url(/static/hanabi/img/r4.png); }
.r5 { background-image: url(/static/hanabi/img/r5.png); }
.b1 { background-image: url(/static/hanabi/img/b1.png); }
.b2 { background-image: url(/static/hanabi/img/b2.png); }
.b3 { background-image: url(/static/hanabi/img/b3.png); }
.b4 { background-image: url(/static/hanabi/img/b4.png); }
.b5 { background-image: url(/static/hanabi/img/b5.png); }
.g1 { background-image: url(/static/hanabi/img/g1.png); }
.g2 { background-image: url(/static/hanabi/img/g2.png); }
.g3 { background-image: url(/static/hanabi/img/g3.png); }
.g4 { background-image: url(/static/hanabi/img/g4.png); }
.g5 { background-image: url(/static/hanabi/img/g5.png); }
.y1 { background-image: url(/static/hanabi/img/y1.png); }
.y2 { background-image: url(/static/hanabi/img/y2.png); }
.y3 { background-image: url(/static/hanabi/img/y3.png); }
.y4 { background-image: url(/static/hanabi/img/y4.png); }
.y5 { background-image: url(/static/hanabi/img/y5.png); }
.p1 { background-image: url(/static/hanabi/img/p1.png); }
.p2 { background-image: url(/static/hanabi/img/p2.png); }
.p3 { background-image: url(/static/hanabi/img/p3.png); }
.p4 { background-image: url(/static/hanabi/img/p4.png); }
.p5 { background-image: url(/static/hanabi/img/p5.png); }
.back { background-image: url(/static/hanabi/img/back.png); }